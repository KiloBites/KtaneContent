<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Fax Matrix — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/Modules/Fax Matrix.js"></script>
    <style>
        table {
            margin: 1em auto;
            border: none;
        }

        svg.hexgrid path {
            fill: transparent;
            stroke: #000;
            stroke-width: 1.08px;
        }
        
        .dark svg.hexgrid path {
            stroke: #ddd
        }

        svg.hexgrid text {
            font-size: 14.11px;
            font-weight: 400;
        }

        .td {
            font-size: 15px;
        }

        .page-footer::before { content: 'Page '; }
        .page-footer::after { content: ' of 4'; }
    </style>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            changeFlavorTexts("ENG");

            /* Note to translators: Please change this to the language you desire and add translations to
             * the Fax Matrix.js file found in js/Modules.
             * - Kilo
            */
        });
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Fax Matrix</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Fax Matrix.svg" class="diagram">
                <h2>On the Subject of Fax Matrix</h2>
                <p class="flavour-text">I am the boss!</p>

                <p>The module consists of a 10×10 grid of buttons, two displays (which can show horizontal and vertical clues), and two buttons on the top left side. The left button can check for validation of the puzzle, or reset if on phase 2, and the right button can toggle flagging or clear the grid if on phase 2. During phase one, holding down the right button for a second and releasing will reset the grid.</p>
                <p>Solve the nonogram puzzle with the clues provided, and determine the transformations made on the grid to obtain a valid data matrix consisting of a generated 7-digit number.</p>
                <h3>Phase 1: Solving the Nonogram</h3>
                <ul>
                    <li>There will be a 10×10 nonogram to solve.</li>
                    <li>Each numbered clue hints at the squares that must be filled in that row/column.</li>
                    <li>Each digit represents a set of adjacent squares that must be filled in that row/column.</li>
                    <li>When there are multiple digits in one clue, there needs to be multiple sets of squares that have unfilled squares between them.</li>
                    <li>You can switch between Fill mode and Flag mode (where the right button's LED on the top left is white, this mode is for flagging where the unfilled squares are).</li>
                </ul>
                <p>Pressing the top left button will check the entire grid. If each clue in the row/column is satisfied, the background of the grid will fade to white, the clues will disappear, and the top left buttons’ texts will change to Reset and Clear respectively. This will progress to phase 2. All of the markings made before checking will also disappear.</p>
                <p>However, if each clue in the row/column isn’t satisfied, the module will not progress, and will incur a strike.</p>
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>

        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Fax Matrix</span>
            </div>
            <div class="page-content">
                <h3>Phase 2: Determining Transformations</h3>
                <p>To determine how the grid is transformed, convert all of the characters of the serial number into arrow directions by taking their alphabetic positions (A1Z26) of all of the letters, and taking the numbers as themselves, then taking them modulo 6, +1 (1 is up, 6 is up-left).</p>
                <p>Start at the center of the hexagonal grid. Perform all moves of all directions from left to right (moving wraps around the hexagonal grid), applying the transformation given on the hexagonal grid using the table below.</p>
                <svg class="hexgrid" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100.75 104.48" style="width: 75%; margin: auto; display: block;">
                <path class="highlightable" d="m60.32.54 9.95 17.23-9.95 17.24h-19.9l-9.95-17.24L40.42.54z"/>
                <path class="highlightable" d="m90.17 17.77 9.95 17.24-9.95 17.23h-19.9l-9.95-17.23 9.95-17.24z"/>
                <path class="highlightable" d="m30.47 17.77 9.95 17.24-9.95 17.23h-19.9L.63 35.01l9.94-17.24z"/>
                <path class="highlightable" d="m60.32 35 9.95 17.24-9.95 17.23h-19.9l-9.95-17.23 9.95-17.23z"/>
                <path class="highlightable" d="m90.17 52.24 9.95 17.23-9.95 17.24h-19.9l-9.95-17.24 9.95-17.23z"/>
                <path class="highlightable" d="m30.47 52.24 9.95 17.23-9.95 17.24h-19.9L.63 69.47l9.94-17.23z"/>
                <path class="highlightable" d="m60.32 69.47 9.95 17.24-9.95 17.23h-19.9L30.47 86.7l9.95-17.24z"/>
                <text class="invertible" x="41.87" y="22.21">FQ</text>
                <text class="invertible" x="11.91" y="40.06">FG</text>
                <text class="invertible" x="76   " y="39.89">S </text>
                <text class="invertible" x="45.89" y="57.18">N </text>
                <text class="invertible" x="16.02" y="74.5 ">R </text>
                <text class="invertible" x="71.3 " y="74.47">SR</text>
                <text class="invertible" x="42.11" y="91.65">SC</text>
                </svg>
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>

        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Fax Matrix</span>
            </div>
            <div class="page-content">
                <p>If the instruction involves quadrants, split the entire grid into 4 5×5 grids (they will be numbered in reading order), then take the alphabetic position or number of the Nth character of the serial number (where N is current instruction position), modulo 4 + 1. This is Quadrant A. Then take the right of the Nth character of the serial number wrapped around, modulo 4 + 1. This is Quadrant B. If both quadrant indexes are the same, add one to Quadrant B before moduloing again.</p>
                <table>
                    <tr>
                        <th>FQ</th><td>Flip Quadrant A vertically if the alphabetic position of the Nth letter or number of the serial number is even, otherwise horizontally.</td>
                    </tr>
                    <tr>
                        <th>FG</th><td>Flip the grid vertically if the alphabetic position of the Nth letter or number of the serial number is even, otherwise horizontal.</td>
                    </tr>
                    <tr>
                        <th>S</th><td>Swap Quadrant A with Quadrant B.</td>
                    </tr>
                    <tr>
                        <th>N</th><td>Do nothing to the grid/quadrant.</td>
                    </tr>
                    <tr>
                        <th>R</th><td>Rotate the quadrants clockwise if the alphabetic position of the Nth letter or number of the serial number is even, otherwise counterclockwise.</td>
                    </tr>
                    <tr>
                        <th>SR</th><td>Shift the rows up by one if the alphabetic position of the Nth letter or number of the serial number is even, otherwise down by one.</td>
                    </tr>
                    <tr>
                        <th>SC</th><td>Shift the columns right by one if the alphabetic position of the Nth letter or number of the serial number is even, otherwise left by one.</td>
                    </tr>
                </table>
                <p>Once you apply all transformations, scan the data matrix to obtain a 7-digit number. This will be the number you need to submit to the module.</p>
                <p>Using the keyboard or keypad, type in the 7-digit number. Press backspace on the keyboard to clear submission. Once all 7 digits have been inputted, the module will start ringing. The module is solved if the correct number and data matrix has been validated. Otherwise, a strike will incur and the module will reset the grid back to its previous state.</p>
            </div>
            <div class="page-footer relative-footer">3</div>
        </div>

        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Fax Matrix</span>
            </div>
            <div class="page-content">
                <h3>APPENDIX D4T4M4TR1X:</h3>
                <p>A Data Matrix is a two-dimensional code consisting of black and white cells arranged in a square pattern. An example of a 7-dgit number encoded into a data matrix is shown below.</p>
                <img src="img/Data Matrix/DataMatrixExample.png">
            </div>
            <div class="page-footer relative-footer">4</div>
        </div>
    </div>
</body>
</html>